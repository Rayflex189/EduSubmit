{% include 'base.html' with page_title="Student Dashboard" %}

<body>

<div class="navbar" style="
    background:#1E3A8A; 
    padding:15px 25px; 
    color:white; 
    font-size:20px; 
    font-weight:600; 
    display:flex;
    justify-content:space-between;
    align-items:center;
">
    <span>ğŸ“ Student Dashboard</span>
    <a href="{% url 'logout' %}" 
       style="color:white; text-decoration:none; font-size:16px; font-weight:500;">
        ğŸ”’ Logout
    </a>
</div>

<div class="container" style="max-width:850px; margin:40px auto;">

    <h2 style="color:#1E3A8A; font-size:28px; font-weight:700; margin-bottom:15px;">
        Welcome, {{ student.full_name }}
    </h2>
    
    <p style="color:#6b7280; margin-bottom:20px;">Matric: {{ student.matric_number }}</p>

    <div class="card" style="
        background:white;
        border-radius:12px;
        padding:25px 30px;
        box-shadow:0 4px 15px rgba(0,0,0,0.08);
        margin-bottom:40px;
    ">
        <h3 style="color:#1E3A8A; font-size:22px; margin-bottom:15px;">Your Assignment Overview</h3>

        <div style="display:flex; gap:20px; margin-bottom:20px; flex-wrap:wrap;">

            <div style="
                background:#eef2ff; 
                padding:15px 20px; 
                border-radius:10px; 
                flex:1;
                min-width:160px;
                text-align:center;">
                <p style="margin:0; font-size:14px; color:#1E3A8A;">Total Submitted</p>
                <h2 style="margin:5px 0; color:#1E3A8A;">{{ submitted }}</h2>
            </div>

            <div style="
                background:#e0f2fe; 
                padding:15px 20px; 
                border-radius:10px; 
                flex:1;
                min-width:160px;
                text-align:center;">
                <p style="margin:0; font-size:14px; color:#0369a1;">Pending Grading</p>
                <h2 style="margin:5px 0; color:#0369a1;">{{ pending }}</h2>
            </div>

            <div style="
                background:#dcfce7; 
                padding:15px 20px; 
                border-radius:10px; 
                flex:1;
                min-width:160px;
                text-align:center;">
                <p style="margin:0; font-size:14px; color:#15803d;">Graded</p>
                <h2 style="margin:5px 0; color:#15803d;">{{ graded }}</h2>
            </div>

        </div>

        <a href="{% url 'upload_assignment' %}">
            <button style="
                background:#1E3A8A;
                padding:12px 20px;
                color:white;
                border:none;
                border-radius:8px;
                font-size:16px;
                cursor:pointer;
                margin-top:10px;
                transition:0.3s;">
                ğŸ“¤ Upload New Assignment
            </button>
        </a>

        <h3 style="margin-top:30px; color:#1E3A8A; font-size:20px;">Your Submissions</h3>

        {% if assignments %}
        <table class="table" style="
            width:100%; 
            border-collapse:collapse; 
            margin-top:15px;">
            
            <tr style="background:#1E3A8A; color:white; text-align:left;">
                <th style="padding:12px;">Title</th>
                <th style="padding:12px;">Date Submitted</th>
                <th style="padding:12px;">Status</th>
                <th style="padding:12px;">Grade</th>
                <th style="padding:12px;">Feedback</th>
            </tr>

            {% for assignment in assignments %}
            <tr style="
                background:#ffffff;
                border-bottom:1px solid #e5e7eb;
                transition:0.2s;
            " onmouseover="this.style.background='#f3f4f6';" onmouseout="this.style.background='white';">
                <td style="padding:12px; font-weight:500;">{{ assignment.title }}</td>
                <td style="padding:12px; color:#6b7280;">{{ assignment.date_uploaded|date:"M d, Y H:i" }}</td>
                <td style="padding:12px; font-weight:500;">
                    {% if assignment.grade %}
                    <span style="
                        background:#10b981;
                        color:white;
                        padding:4px 10px;
                        border-radius:15px;
                        font-size:13px;
                    ">
                        Graded
                    </span>
                    {% else %}
                    <span style="
                        background:#f59e0b;
                        color:white;
                        padding:4px 10px;
                        border-radius:15px;
                        font-size:13px;
                    ">
                        Pending
                    </span>
                    {% endif %}
                </td>
                <td style="padding:12px; font-weight:600; color:#1E3A8A;">
                    {% if assignment.grade %}{{ assignment.grade }}{% else %}--{% endif %}
                </td>
                <td style="padding:12px; font-size:14px; color:#6b7280; max-width:200px;">
                    {% if assignment.feedback %}
                    <span title="{{ assignment.feedback }}" style="cursor:help;">
                        {{ assignment.feedback|truncatechars:30 }}
                    </span>
                    {% else %}
                    --
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
        {% else %}
        <div style="text-align:center; padding:40px; color:#6b7280;">
            <p style="font-size:18px;">No assignments submitted yet.</p>
            <p>Click "Upload New Assignment" to get started!</p>
        </div>
        {% endif %}

    </div>

</div>

</body>